<ion-content class="bg-gradient-to-br from-slate-900 via-slate-800 to-slate-900">
    <!-- Loading State -->
    <app-loading 
        *ngIf="isLoading" 
        message="Loading word game..." 
        icon="üî§">
    </app-loading>

    <!-- Game Content -->
    <div class="max-w-2xl mx-auto px-6 py-4 flex flex-col gap-4 flex-1" *ngIf="!quizComplete && !isLoading">
        <!-- Progress Header -->
        <div
            class="flex justify-between text-base text-gray-300 bg-slate-700/70 backdrop-blur-sm rounded-xl p-4 border border-slate-600">
            <div class="flex items-center space-x-2">
                <span class="text-green-400">üìù</span>
                <span>Sentence {{ questionCount }} / {{ maxQuestions }}</span>
            </div>
            <div class="flex items-center space-x-2 font-semibold">
                <span class="text-green-400">‚≠ê</span>
                <span class="text-green-300">{{ correctCount }}</span>
            </div>
        </div>

        <!-- Question Card -->
        <div
            class="bg-gradient-to-br from-slate-800 to-slate-700 rounded-2xl p-6 shadow-xl border border-slate-600 flex-shrink-0">
            <h2 class="text-xl font-bold text-gray-100 text-center leading-relaxed">{{ enSentence }}</h2>
        </div>

        <!-- Selected Words Area -->
        <div
            class="bg-slate-700/50 rounded-xl p-3 border border-slate-600 min-h-[2.5rem] flex items-center justify-center flex-shrink-0">
            <div class="flex flex-wrap gap-2 justify-center">
                <span *ngFor="let word of selectedWords" (click)="unselectWord(word)"
                    class="bg-green-600 hover:bg-green-500 text-white px-3 py-1 text-sm rounded-full cursor-pointer transition-all duration-200 hover:scale-105 active:scale-95">
                    {{ word }}
                </span>
                <span *ngIf="selectedWords.length === 0" class="text-gray-400 text-xs">
                    Tap words below to build your sentence
                </span>
            </div>
        </div>

        <!-- Word Options -->
        <div class="flex-1 overflow-y-auto max-h-[40vh]">
            <div class="grid grid-cols-2 gap-3 pb-4">
                <button *ngFor="let word of wordOptions" [disabled]="word.used" (click)="selectWord(word.word)"
                    [class]="word.used ? 'bg-slate-600/50 text-gray-500 cursor-not-allowed' : 'bg-slate-700/70 hover:bg-slate-600 text-gray-200 hover:border-green-500 hover:shadow-green-500/20'"
                    class="font-medium py-3 px-4 rounded-xl border-2 border-slate-600 transition-all duration-200 shadow-lg backdrop-blur-sm hover:scale-105 active:scale-95 text-sm">
                    {{ word.word }}
                </button>
            </div>
        </div>

        <!-- Check Answer Button -->
        <div class="flex justify-center flex-shrink-0">
            <button (click)="checkAnswer()"
                class="bg-gradient-to-r from-green-600 to-green-500 hover:from-green-500 hover:to-green-400 text-white font-semibold py-3 px-8 rounded-xl shadow-lg hover:shadow-green-500/30 transition-all duration-200 hover:scale-105 active:scale-95 border border-green-400/30">
                Check Answer
            </button>
        </div>

        <!-- Feedback -->
        <div *ngIf="feedback" class="text-center text-lg font-medium p-6 rounded-2xl border backdrop-blur-sm"
            [class]="wrongAnswer ? 'bg-red-900/50 text-red-300 border-red-700' : 'bg-green-900/50 text-green-300 border-green-600'">
            <div class="flex items-center justify-center space-x-2">
                <span class="text-2xl">{{ wrongAnswer ? '‚ùå' : '‚úÖ' }}</span>
                <span>{{ feedback }}</span>
            </div>
        </div>
    </div>

    <!-- Completion Screen -->
    <div *ngIf="quizComplete" class="text-center px-6 py-4 flex items-center justify-center flex-1">
        <div
            class="max-w-md mx-auto bg-gradient-to-br from-slate-800 to-slate-700 backdrop-blur-sm rounded-3xl p-6 shadow-2xl border border-slate-600">
            <div class="text-6xl mb-4">üéâ</div>
            <h2 class="text-3xl font-bold text-gray-100 mb-4">Game Complete!</h2>
            <div class="bg-green-900/50 rounded-xl p-4 mb-6 border border-green-700">
                <p class="text-xl text-green-300 font-semibold">
                    Score: {{ correctCount }} / {{ maxQuestions }}
                </p>
                <div class="mt-2">
                    <div class="text-sm text-gray-400">
                        {{ correctCount === maxQuestions ? 'Perfect! üåü' :
                        correctCount >= maxQuestions * 0.8 ? 'Great job! üëè' :
                        correctCount >= maxQuestions * 0.6 ? 'Good effort! üëç' :
                        'Keep practicing! üí™' }}
                    </div>
                </div>
            </div>
            <button (click)="restartGame()"
                class="w-full bg-gradient-to-r from-green-600 to-green-500 hover:from-green-500 hover:to-green-400 text-white font-semibold py-4 px-6 rounded-xl transition-all duration-300 shadow-lg hover:shadow-green-500/25 hover:scale-105 active:scale-95 border border-green-400/30">
                <div class="flex items-center justify-center space-x-2">
                    <span>üîÑ</span>
                    <span>Play Again</span>
                </div>
            </button>
        </div>
    </div>
</ion-content>