<ion-content class="bg-gradient-to-br from-slate-900 via-slate-800 to-slate-900">
    <!-- Loading State -->
    <app-loading 
        *ngIf="isLoading" 
        message="Loading translation..." 
        icon="‚úçÔ∏è">
    </app-loading>

    <!-- Game Content -->
    <div class="max-w-2xl mx-auto px-6 py-4 flex flex-col gap-4 flex-1 justify-center"
        *ngIf="!quizComplete && !isLoading && currentQuestion">
        <!-- Progress Header -->
        <div
            class="flex justify-between text-base text-gray-300 bg-slate-700/70 backdrop-blur-sm rounded-xl p-4 border border-slate-600">
            <div class="flex items-center space-x-2">
                <span class="text-blue-400">‚úçÔ∏è</span>
                <span>Question {{ questionCount }} / {{ maxQuestions }}</span>
            </div>
            <div class="flex items-center space-x-2 font-semibold">
                <span class="text-green-400">‚≠ê</span>
                <span class="text-green-300">{{ correctCount }}</span>
            </div>
        </div>

        <!-- Question Card -->
        <div class="bg-gradient-to-br from-slate-800 to-slate-700 rounded-2xl p-8 shadow-xl border border-slate-600">
            <div class="text-center">
                <div class="text-blue-400 text-sm font-medium mb-2">Translate to Faroese:</div>
                <h2 class="text-2xl font-bold text-gray-100 leading-relaxed">
                    {{ currentQuestion.en }}
                </h2>
            </div>
        </div>

        <!-- Input Area -->
        <div class="bg-slate-700/50 rounded-xl p-6 border border-slate-600">
            <div class="text-center text-gray-300 text-sm mb-4">Type your translation below:</div>

            <div class="bg-slate-800 rounded-lg border border-slate-500 p-3">
                <input
                    #answerInput
                    type="text"
                    [(ngModel)]="userAnswer"
                    placeholder="Enter Faroese translation..."
                    class="w-full bg-transparent outline-none text-white text-lg placeholder-slate-400"
                    [disabled]="isAnswered"
                    (keyup.enter)="checkAnswer()"
                    autocomplete="off"
                    autocapitalize="off"
                    spellcheck="false"
                />
            </div>

            <!-- Hints Section -->
            <div class="mt-6 text-center">
                <button (click)="toggleHints()"
                    class="inline-flex items-center gap-2 bg-yellow-700/20 hover:bg-yellow-700/30 text-yellow-300 hover:text-yellow-200 text-base font-medium px-4 py-3 rounded-xl border border-yellow-700/50 transition-all duration-200 disabled:opacity-50 disabled:cursor-not-allowed"
                    [disabled]="isAnswered">
                    <span>{{ showHints ? 'Hide Hints' : 'Show Hints' }}</span>
                    <span class="text-lg">üí°</span>
                </button>

                <div *ngIf="showHints" class="mt-4 p-4 bg-gradient-to-br from-yellow-900/40 to-yellow-800/30 rounded-xl border border-yellow-700/60 shadow-lg">
                    <div class="text-yellow-200 text-base font-semibold mb-3 flex items-center justify-center gap-2">
                        <span>üí≠</span>
                        <span>First Letters</span>
                    </div>
                    <div class="grid grid-cols-2 sm:flex sm:flex-wrap gap-3 justify-center">
                        <span *ngFor="let hint of currentQuestion.hints"
                            class="bg-yellow-600/40 text-yellow-100 px-4 py-2 rounded-lg text-base font-mono font-semibold border border-yellow-500/50 shadow-sm min-w-[60px] text-center">
                            {{ hint }}
                        </span>
                    </div>
                </div>
            </div>

            <!-- Check Answer Button -->
            <div class="flex justify-center mt-6">
                <button (click)="checkAnswer()" [disabled]="!userAnswer.trim() || isAnswered"
                    class="bg-gradient-to-r from-blue-600 to-blue-500 hover:from-blue-500 hover:to-blue-400 disabled:from-gray-600 disabled:to-gray-500 disabled:cursor-not-allowed text-white font-semibold py-3 px-8 rounded-xl shadow-lg hover:shadow-blue-500/30 transition-all duration-200 hover:scale-105 active:scale-95 border border-blue-400/30">
                    Check Answer
                </button>
            </div>
        </div>

        <!-- Feedback -->
        <div *ngIf="feedback" class="text-center text-lg font-medium mt-4 p-6 rounded-2xl border backdrop-blur-sm"
            [class]="wrongAnswer ? 'bg-red-900/50 text-red-300 border-red-700' : 'bg-green-900/50 text-green-300 border-green-600'">
            <div class="flex items-center justify-center space-x-2">
                <span class="text-2xl">{{ wrongAnswer ? '‚ùå' : '‚úÖ' }}</span>
                <span>{{ feedback }}</span>
            </div>
            
            <!-- Next Question Button (only show when wrong answer) -->
            <div *ngIf="wrongAnswer" class="mt-4">
                <button 
                    (click)="nextQuestion()"
                    class="bg-gradient-to-r from-slate-600 to-slate-500 hover:from-slate-500 hover:to-slate-400 text-white font-semibold py-2 px-6 rounded-lg shadow-lg hover:shadow-slate-500/30 transition-all duration-200 hover:scale-105 active:scale-95 border border-slate-400/30">
                    Next Question ‚Üí
                </button>
            </div>
        </div>
    </div>

    <!-- Completion Screen -->
    <div *ngIf="quizComplete" class="text-center px-6 py-4 flex items-center justify-center flex-1">
        <div
            class="max-w-md mx-auto bg-gradient-to-br from-slate-800 to-slate-700 backdrop-blur-sm rounded-3xl p-6 shadow-2xl border border-slate-600">
            <div class="text-6xl mb-4">üéâ</div>
            <h2 class="text-3xl font-bold text-gray-100 mb-4">Translation Complete!</h2>
            <div class="bg-green-900/50 rounded-xl p-4 mb-6 border border-green-700">
                <p class="text-xl text-green-300 font-semibold">
                    Score: {{ correctCount }} / {{ maxQuestions }}
                </p>
                <div class="mt-2">
                    <div class="text-sm text-gray-400">
                        {{ correctCount === maxQuestions ? 'Perfect! üåü' :
                        correctCount >= maxQuestions * 0.8 ? 'Great job! üëè' :
                        correctCount >= maxQuestions * 0.6 ? 'Good effort! üëç' :
                        'Keep practicing! üí™' }}
                    </div>
                </div>
            </div>
            <button (click)="restartGame()"
                class="w-full bg-gradient-to-r from-blue-600 to-blue-500 hover:from-blue-500 hover:to-blue-400 text-white font-semibold py-4 px-6 rounded-xl transition-all duration-300 shadow-lg hover:shadow-blue-500/25 hover:scale-105 active:scale-95 border border-blue-400/30">
                <div class="flex items-center justify-center space-x-2">
                    <span>üîÑ</span>
                    <span>Play Again</span>
                </div>
            </button>
        </div>
    </div>
</ion-content>